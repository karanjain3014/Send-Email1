import streamlit as st
import smtplib
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart


st.set_page_config(page_title="Send Email App", layout="centered")

st.markdown(
 """
 <style>
 .stApp {
   background-image: url("https://img.freepik.com/free-vector/illuminated-neon-lights-stage-realistic-vector_1441-3734.jpg?semt=ais_hybrid&w=740");
   background-size: cover;
   background-attachment:fixed;
}
</style>

 <h1 style='text-align: center; 
               font-family: "Trebuchet MS", sans-serif; 
               color: #3c6e71;
               font-size: 50px; 
               background-color: #f0f0f0; 
               padding: 10px;
               border-radius: 10px;'>
        ðŸ“§ Send Email Using Streamlit
    </h1>
 """,
 unsafe_allow_html=True
)




sender_email = st.text_input("Your Gmail Address")
app_password = st.text_input("Your Gmail App Password", type="password")
receiver_email = st.text_input("Recipient Email")
subject = st.text_input("Email Subject")
message_body = st.text_area("Email Message")

if st.button("Send Email"):
    if sender_email and app_password and receiver_email and subject and message_body:
        try:
            
            msg = MIMEMultipart()
            msg["From"] = sender_email
            msg["To"] = receiver_email
            msg["Subject"] = subject
            msg.attach(MIMEText(message_body, "plain"))

            # Send email via Gmail SMTP
            server = smtplib.SMTP("smtp.gmail.com", 587)
            server.starttls()
            server.login(sender_email, app_password)
            server.sendmail(sender_email, receiver_email, msg.as_string())
            server.quit()
            st.success("Email sent successfully!")
        except Exception as e:
            st.error(f" Failed to send email: {e}")
    else:
        st.warning(" Please fill in all fields before sending.")

